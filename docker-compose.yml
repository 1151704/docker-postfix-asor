version: '3.3'
services:
    coredns:
        build:
          context: ./dns
        container_name: asor-coredns
        restart: always
        expose:
            - '53'
            - '53/udp'
        ports:
            - '53:53'
            - '53:53/udp'
        volumes:
            - './dns:/etc/coredns'
        networks:
            - custom_network
    postfix:
        build:
          context: ./postfix
        container_name: asor-postfix
        restart: always
        hostname: postfixasor.com
        expose:
            - '25'
            - '110'
            - '143'
            - '995'
        ports:
            - '25:25'
            - '110:110'
            - '143:143'
            - '995:995'
        networks:
            - custom_network
#     db:
#         image: mysql:latest
#         container_name: asor-db
#         environment:
#             - MYSQL_ROOT_PASSWORD: passroot
#             - MYSQL_DATABASE: database1
#             - MYSQL_USER: user1
#             - MYSQL_PASSWORD: pass1
#         ports:
#             - "3306:3306"
#         volumes:
#             - mysql_data:/var/lib/mysql

# #        depends_on:
# #            - db
# #        links:
# #            - db
# volumes:
#   mysql_data:

networks:
  custom_network:
    driver: bridge